(function(){!function(t,e){var n,o;return o=e.document,n=function(){function n(e){var n=this;this._options=t.extend({name:"tour",end:"End tour",next:"Next &raquo;",previous:"&laquo; Prev",afterSetState:function(){},afterGetState:function(){},onShow:function(){},onHide:function(){}},e),this._steps=[],this.setCurrentStep(),t(o).on("click",".popover .next",function(t){return t.preventDefault(),n.next()}),t(o).on("click",".popover .prev",function(t){return t.preventDefault(),n.prev()}),t(o).on("click",".popover .end",function(t){return t.preventDefault(),n.end()})}return n.prototype.setState=function(e,n){return t.cookie(""+this._options.name+"_"+e,n,{expires:36500,path:"/"}),this._options.afterSetState(e,n)},n.prototype.getState=function(e){var n;return n=t.cookie(""+this._options.name+"_"+e),this._options.afterGetState(e,n),n},n.prototype.addStep=function(t){return this._steps.push(t)},n.prototype.getStep=function(e){return null!=this._steps[e]?t.extend({path:"",placement:"right",title:"",content:"",next:e===this._steps.length-1?-1:e+1,prev:e-1,animation:!0,onShow:this._options.onShow,onHide:this._options.onHide},this._steps[e]):void 0},n.prototype.start=function(t){return null==t&&(t=!1),t||!this.ended()?this.showStep(this._current):void 0},n.prototype.next=function(){return this.hideStep(this._current),this.showNextStep()},n.prototype.prev=function(){return this.hideStep(this._current),this.showPrevStep()},n.prototype.end=function(){return this.hideStep(this._current),this.setState("end","yes")},n.prototype.ended=function(){return!!this.getState("end")},n.prototype.restart=function(){return this.setState("current_step",null),this.setState("end",null),this.setCurrentStep(0),this.start()},n.prototype.hideStep=function(e){var n;return n=this.getStep(e),null!=n.onHide&&n.onHide(this),t(n.element).popover("hide")},n.prototype.showStep=function(e){var n;return(n=this.getStep(e))?(this.setCurrentStep(e),""!==n.path&&o.location.pathname!==n.path&&o.location.pathname.replace(/^.*[\\\/]/,"")!==n.path?void(o.location.href=n.path):(null!=n.onShow&&n.onShow(this),null!=n.element&&0!==t(n.element).length&&t(n.element).is(":visible")?this._showPopover(n,e):void this.showNextStep())):void 0},n.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this.setState("current_step",t)):(this._current=this.getState("current_step"),this._current=null===this._current||"null"===this._current?0:parseInt(this._current))},n.prototype.showNextStep=function(){var t;return t=this.getStep(this._current),this.showStep(t.next)},n.prototype.showPrevStep=function(){var t;return t=this.getStep(this._current),this.showStep(t.prev)},n.prototype._showPopover=function(e){var n,o,r;return n=""+e.content+"<br /><p>",o=[],e.prev>=0&&o.push("<a href='#"+e.prev+"' class='prev'>"+this._options.previous+"</a>"),e.next>=0&&o.push("<a href='#"+e.next+"' class='next'>"+this._options.next+"</a>"),n+=o.join(" | "),n+="<a href='#' class='pull-right end'>"+this._options.end+"</a>",t(e.element).popover({placement:e.placement,trigger:"manual",title:e.title,content:n,animation:e.animation}).popover("show"),r=t(e.element).data("popover").tip(),this._reposition(r),this._scrollIntoView(r)},n.prototype._reposition=function(e){var n,r,i;return i=e.offset(),n=t(o).outerHeight()-i.top-t(e).outerHeight(),0>n&&(i.top=i.top+n),r=t(o).outerWidth()-i.left-t(e).outerWidth(),0>r&&(i.left=i.left+r),i.top<0&&(i.top=0),i.left<0&&(i.left=0),e.offset(i)},n.prototype._scrollIntoView=function(n){var o;return o=n.get(0).getBoundingClientRect(),o.top>0&&o.bottom<t(e).height()&&o.left>0&&o.right<t(e).width()?void 0:n.get(0).scrollIntoView(!0)},n}(),e.Tour=n}(jQuery,window)}).call(this);
